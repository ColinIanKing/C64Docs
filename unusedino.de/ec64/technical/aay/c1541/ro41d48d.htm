<html><head><title>All_About_Your_1541-Online-Help Version 0.23</title></head>
<body bgcolor="#a098ff" text="#000000" link="#ffffff" alink="#ffffff" vlink="#404040"><center><table><tr><td><pre>

 $D48D/54413:   Write dir block

Jump from <a href="ro41d6e4.htm">$D730</a>:

D48D: 20 3B DE  JSR <a href="ro41de3b.htm">$DE3B</a>       ; get track and sector number
D490: A9 01     LDA #$01
D492: 85 6F     STA <a href="ra416f.htm">$6F</a>         ; a block
D494: A5 69     LDA <a href="ra4169.htm">$69</a>         ; save step width 10 for block
D496: 48        PHA             ; allocation
D497: A9 03     LDA #$03
D499: 85 69     STA <a href="ra4169.htm">$69</a>
D49B: 20 2D F1  JSR <a href="ro41f11e.htm">$F12D</a>       ; find free block in BAM
D49E: 68        PLA
D49F: 85 69     STA <a href="ra4169.htm">$69</a>         ; get step width back
D4A1: A9 00     LDA #$00
D4A3: 20 C8 D4  JSR <a href="ro41d4c8.htm">$D4C8</a>       ; buffer pointer to zero
D4A6: A5 80     LDA <a href="ra4180.htm">$80</a>
D4A8: 20 F1 CF  JSR <a href="ro41cff1.htm">$CFF1</a>       ; track number in buffer
D4AB: A5 81     LDA <a href="ra4181.htm">$81</a>
D4AD: 20 F1 CF  JSR <a href="ro41cff1.htm">$CFF1</a>       ; sector number in buffer
D4B0: 20 C7 D0  JSR <a href="ro41d0c7.htm">$D0C7</a>       ; write block to disk
D4B3: 20 99 D5  JSR <a href="ro41d599.htm">$D599</a>       ; and verify
D4B6: A9 00     LDA #$00
D4B8: 20 C8 D4  JSR <a href="ro41d4c8.htm">$D4C8</a>       ; buffer pointer to zero

Jump from $D4BE:

D4BB: 20 F1 CF  JSR <a href="ro41cff1.htm">$CFF1</a>       ; fill buffer with zeroes
D4BE: D0 FB     BNE $D4BB
D4C0: 20 F1 CF  JSR <a href="ro41cff1.htm">$CFF1</a>       ; zero as following track
D4C3: A9 FF     LDA #$FF
D4C5: 4C F1 CF  JMP <a href="ro41cff1.htm">$CFF1</a>       ; $FF as number of bytes

    <a href="ro41d486.htm">Previous Page</a> / <a href="ro41d4c8.htm">Next Page</a>

</pre></td></tr></table></center></body></html>
